# AmoCRM Leads Merger
Проект разработан для автоматического объединения и перемещения сделок в AmoCRM на основе их контактов и номеров телефонов.

# Установка и настройка

1. Клонируйте репозиторий проекта на свой компьютер:
```
git clone https://github.com/martynovalek/amocrm-leads-merger.git
```

2. Перейдите в каталог проекта и установите необходимые зависимости:
```
cd amocrm-leads-merger
npm install
```
3. Создайте файл `.env` в корне проекта и укажите следующие переменные окружения:
```
AMO_DOMAIN=your_amocrm_domain
AMO_CLIENT_ID=your_client_id
AMO_CLIENT_SECRET=your_client_secret
AMO_REDIRECT_URI=your_redirect_uri
AMO_SERVER_PORT=your_server_port
AMO_ACCESS_TOKEN=your_access_token
AMO_REFRESH_TOKEN=your_refresh_token
AMO_PIPELINE_ID=your_pipeline_id
AMO_PIPELINE_STATUS_ID=your_pipeline_status_id
AMO_PIPELINE_NEW_STATUS_ID=your_new_status_id
TELEGRAM_TOKEN=your_telegram_token
TELEGRAM_CHAT_ID=your_telegram_chat_id
```
4. Запустите сервер:
```
npm start
```
## Использование

Приложение автоматически запускается каждые 10 минут для обработки сделок. Вы также можете вручную запустить процесс объединения сделок, отправив команду `/merge` в вашем телеграм-боте.

# Техническая документация для проекта по автоматическому объединению сделок в AmoCRM

### 1. Обзор:
Данный проект представляет собой автоматическое объединение сделок в AmoCRM на основе контактного номера телефона. Приложение использует Node.js, библиотеку amocrm-js для взаимодействия с AmoCRM и node-telegram-bot-api для отправки уведомлений в Telegram.

### 2. Подготовка:
Установите Node.js (LTS версию) на вашем компьютере или сервере, если она еще не установлена.
Установите зависимости проекта, выполнив команду `npm install` в корневой папке проекта.
Создайте файл `.env` в корневой папке проекта и добавьте необходимые переменные окружения.

### 3. Запуск проекта:
Для запуска проекта выполните команду node `index.js` в корневой папке проекта. Приложение начнет работу на порту, указанном в переменной окружения `AMO_SERVER_PORT`.

### 4. Работа с приложением:
Приложение автоматически обрабатывает сделки в AmoCRM каждые 10 минут, объединяя их на основе контактного номера телефона.
Если необходимо запустить процесс обработки вручную, отправьте команду `/merge` в чат с вашим Telegram ботом.

### 5. Структура проекта:
`index.js` - основной файл проекта, содержащий логику работы с AmoCRM и Telegram ботом.
`node_modules` - папка с установленными зависимостями проекта.
`package.json` и `package-lock.json` - файлы, описывающие зависимости проекта и другую метаинформацию.
`.env` - файл с переменными окружения, содержащий чувствительные данные и настройки для различных сред разработки и эксплуатации.
